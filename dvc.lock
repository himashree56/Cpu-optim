schema: '2.0'
stages:
  prepare:
    cmd: python src/data_prep.py --input Data/data-1756126612050.csv --output 
      data/processed/train.csv
    deps:
    - path: Data/data-1756126612050.csv
      hash: md5
      md5: 448de498a9f801b2a2f00c733ae192f5
      size: 310056916
    - path: src/data_prep.py
      hash: md5
      md5: 63df20cf6517928dba88ff5a524bc2d2
      size: 2945
    outs:
    - path: data/processed/train.csv
      hash: md5
      md5: a557570a92a68a3ff76548fe8a6ad46f
      size: 92851109
  train:
    cmd: "python src/train.py  --input data/processed/train.csv  --model_dir models
      --mlflow-tracking-uri https://dagshub.com/himashree56/fluffy-system.mlflow --mlflow-experiment-name
      cpu-usage-prediction\n"
    deps:
    - path: data/processed/train.csv
      hash: md5
      md5: a557570a92a68a3ff76548fe8a6ad46f
      size: 92851109
    - path: params.yaml
      hash: md5
      md5: bd46832b4a0c997c65d230cdffb3ab75
      size: 973
    - path: src/train.py
      hash: md5
      md5: b9a32d4c35cf7e291f4ec0c7fae539d8
      size: 9348
    params:
      params.yaml:
        data_prep:
          test_size: 0.2
          random_state: 42
          target_col: cpu_usage
        model:
          lightgbm:
            n_estimators: 200
            learning_rate: 0.05
            max_depth: 8
            num_leaves: 31
            subsample: 0.8
            colsample_bytree: 0.8
            reg_alpha: 0.1
            reg_lambda: 0.1
            random_state: 42
            force_col_wise: true
          sgd_regressor:
            loss: squared_error
            penalty: l2
            alpha: 0.0001
            learning_rate: adaptive
            eta0: 0.01
            max_iter: 1000
            tol: 0.001
            random_state: 42
          linear_regression:
            fit_intercept: true
            copy_X: true
            n_jobs: -1
          random_forest:
            n_estimators: 100
            max_depth: 10
            min_samples_split: 5
            min_samples_leaf: 2
            random_state: 42
            n_jobs: -1
        training:
          chunk_size: 1000
          sample_frac: 0.5
          eval_sample_size: 10000
    outs:
    - path: metrics.json
      hash: md5
      md5: a702005c0c254354b7d394efb70cb7ee
      size: 187
    - path: models/LinearRegression.pkl
      hash: md5
      md5: 011b01e2985b2f665c636f91d72c98da
      size: 1625
    - path: models/RandomForest.pkl
      hash: md5
      md5: ec515f88f0d2c561c115bb9af702b8a7
      size: 9871361
  evaluate:
    cmd: python src/evaluate.py --model_dir models --input 
      data/processed/train.csv
    deps:
    - path: data/processed/train.csv
      hash: md5
      md5: a557570a92a68a3ff76548fe8a6ad46f
      size: 92851109
    - path: models/LinearRegression.pkl
      hash: md5
      md5: 011b01e2985b2f665c636f91d72c98da
      size: 1625
    - path: models/RandomForest.pkl
      hash: md5
      md5: ec515f88f0d2c561c115bb9af702b8a7
      size: 9871361
    - path: src/evaluate.py
      hash: md5
      md5: c1aefd3bd3c756d334ebf33116cf6862
      size: 3150
    outs:
    - path: results/metrics.json
      hash: md5
      md5: 03816995a2fa47f1d571cbabc70474b0
      size: 161
